<!-- chat/templates/chat/room.html -->
{% load static %}

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Chat Room</title>

  <link rel="stylesheet" href="{% static 'main.css' %}">

  <script type="text/javascript">
    function move(pos, score, color, rolled) {
      $("#cover").show();
      $(".coin").each(function() {
        $(this).remove();
      });
      var time = 0;
      var x = pos;
      var delay = 0;
      for (i = 0; i <= rolled; i++) {
        var id = "#" + x;
        var coinid = "coin" + x;
        $('<div>').prop("class", "coin").prop("id", coinid).prop("style", "--color:" + color).appendTo(id);
        $("#" + coinid).delay(time * 500).fadeIn();
        $("#" + coinid).delay(150).fadeOut();
        x = (x + 1) % 28;
        if (x == 0) {
          delay = (time + 1) * 500;
        }
        time = time + 1;
      }
      var return_arr = [time * 500, delay + 500]
      return return_arr;
    }

    function removePosition(id, color) {
      var num = $("#" + id).find(".color").length;
      if (num == 1) {
        $("#" + id + " > .empty").remove();
      } else {
        var x = $("#" + id).find("#" + color).length;
        if (num == 3) {
          var k = $("#" + id).find(".color").length;
          $("#" + id).find(".color").each(function() {
            $(this).removeClass('col-6');
            $(this).addClass('col-12');
          });
        }
        $("#" + id).find("#" + color).remove();
      }
    }

    function position(id, colors, dispColors) {
      $("#" + id + " > .empty").remove();
      var col = "";
      var start = '<div class="container block px-0 d-flex justify-content-center align-items-center overlap empty"><div class="row overlap block mx-0 px-0">';
      if (colors.length < 3) {
        col = "12";
      } else {
        col = "6";
      }
      var coin = "";
      var i;
      for (i = 0; i < colors.length; i++) {
        coin = coin + '<div class="col-' + col + ' px-1 d-flex justify-content-center align-items-center color" id="' + colors[i] + '"><div class="small-coin" style="--color:' + dispColors[i] + ';"></div></div>'
      }
      var end = '</div></div>';
      $("#" + id).append(start + coin + end);
    }

    function getColor(c) {
      if (c == 'red') {
        return '#E65B5B';
      }
      if (c == 'blue') {
        return '#3C9FDD';
      }
      if (c == 'green') {
        return '#54EC64';
      }
      if (c == 'yellow') {
        return '#EBED61';
      }
      return 0;
    }

    function getColorList(clist) {
      var i;
      var dlist = [];
      for (i = 0; i < clist.length; i++) {
        dlist.push(getColor(clist[i]));
      }
      return dlist;
    }

    function roundToFive(x, y) {
      var a = Math.round(x * y);
      return Math.ceil(a / 5) * 5;
    }

    function isEnough(amount) {
      var status = $('#status-string').val().split("--");
      if (status != "") {
        var name_list = status[0].split(',');
        var amount_list = status[2].split(',');
        var index = name_list.indexOf('{{name}}');
        var owned_amount = amount_list.splice(index, 1);
        if (parseInt(owned_amount[0]) < parseInt(amount)) {
          return 1;
        }
      }
      return 0;
    }

    function build_btns(id, order, tag) {
      if (order != "0") {
        var b_id = order.split("-");
        var xyz = ["X", "Y", "Z"];
        if (b_id[0] == '1') {
          b_id.splice(0, b_id.length);
        } else if (b_id[0] == 'X>A') {
          b_id[0] = "X";
          xyz.splice(0, xyz.length);
        } else {
          var i;
          for (i = 0; i < b_id.length; i++) {
            if (xyz.indexOf(b_id[i]) != -1) {
              var x = xyz.indexOf(b_id[i]);
              xyz.splice(x, 1);
            }
          }
        }
        if (id != "-1") {
          if (tag == 'show') {
            for (i = 0; i < b_id.length; i++) {
              var amt = $("#build" + id + " .price_bld" + b_id[i]).val();
              if (isEnough(amt) == 0) {
                $("#build" + id + " .bld" + b_id[i]).show();
              } else {
                $("#build" + id + " .bld" + b_id[i]).hide();
              }
            }
            for (i = 0; i < xyz.length; i++) {
              $("#build" + id + " .bsell" + xyz[i]).show();
            }
          } else if (tag == "hide") {
            $("#build" + id + " .build").hide();
            $("#build" + id + " .build-sell").hide();
          }
        }
      }
    }

    function jail_function() {
      var u = $('#gameuser').val();
      if (u == '{{name}}') {
        var chances = ['3', '4', '5'];
        var bails = [0.1, 0.2, 0.3];
        var chance = chances[Math.floor(Math.random() * chances.length)];
        var bail = bails[Math.floor(Math.random() * chances.length)];
        var status = $('#status-string').val().split("--");
        if (status != "") {
          var name_list = status[0].split(',');
          var amount_list = status[2].split(',');
          var index = name_list.indexOf('{{name}}');
          var amt = amount_list.splice(index, 1);
        }
        var bail_amount = roundToFive(parseInt(amt), bail);
        $('#miss_text').html(chance + " Chances");
        $('#bail_text').html("₹" + bail_amount);
        $('#jail-miss').val(chance);
        $("#jail-bail").val(bail_amount);
        $('#missbtn').show();
        $('#bailbtn').show();
        $('#closebtn14').hide();
      }
    }

    function cardbuttonShow(id, tags) {
      taglist = tags.split(',');
      $("#buybtn" + id).hide();
      $("#passbtn" + id).hide();
      $("#closebtn" + id).hide();
      $("#sellbtn" + id).hide();
      for (x of taglist) {
        if (x == "buy") {
          $("#buybtn" + id).show();
        }
        if (x == "sell") {
          $("#sellbtn" + id).show();
        }
        if (x == "pass") {
          $("#passbtn" + id).show();
        }
        if (x == "close") {
          $("#closebtn" + id).show();
        }
      }
    }
    
    function build_rent_price(xyz,bs,rent){
      if(bs == "build"){
        if(xyz == 'X'){
          return roundToFive(parseInt(rent), 1.8);
        }
        if(xyz == 'Y'){
          return roundToFive(parseInt(rent), 1.9);
        }
        if(xyz == 'Z'){
          return roundToFive(parseInt(rent), 2);
        }
      }
      if(bs == "sell"){
        if(xyz == 'X'){
          return roundToFive(parseInt(rent), 0.6);
        }
        if(xyz == 'Y'){
          return roundToFive(parseInt(rent), 0.55);
        }
        if(xyz == 'Z'){
          return roundToFive(parseInt(rent), 0.5);
        }
      }
    }
    
    function update_build_rent(id,rent,build){
      var b_id;
      if (build == 0){
        b_id = ["X", "Y", "Z"];
      } else{
        b_id = build.split("-");
      } 
      var xyz = ["X", "Y", "Z"];
      if (b_id[0] == '1') {
        b_id.splice(0, b_id.length);
      } else if (b_id[0] == 'X>A') {
        b_id[0] = "X";
        xyz.splice(0, xyz.length);
      }  else {
        var i;
        for (i = 0; i < b_id.length; i++) {
          if (xyz.indexOf(b_id[i]) != -1) {
            var x = xyz.indexOf(b_id[i]);
            xyz.splice(x, 1);
          }
        }
      }
      for (i = 0; i < b_id.length; i++) {
        var b = build_rent_price(b_id[i],"build",rent);
        $('#bld' + b_id[i] + '-' + id).html("[₹" + b.toString() + "]");
      }
      for (i = 0; i < xyz.length; i++) {
        var b = build_rent_price(xyz[i],"sell",rent);
        $('#bld' + xyz[i] + '-' + id).html("[₹" + b.toString() + "]");
      }
    }

    function showsell(sell, tag) {
      var owned = sell[1].split(';');
      var bld_owned = sell[3].split(';');
      if (owned[0] != "-1") {
        var i;
        for (i = 0; i < owned.length; i++) {
          if (tag == 1) {
            cardbuttonShow(owned[i], 'sell,close');
            build_btns(owned[i], bld_owned[i], 'show');
          } else {
            cardbuttonShow(owned[i], 'close');
            build_btns(owned[i], bld_owned[i], 'hide');
          }
        }
      }
    }

    function pay(score) {
      var status = $('#status-string').val().split("--");
      if (status != "") {
        var name_list = status[0].split(',');
        var card_list = status[4].split(',');
        var amount_list = status[2].split(',');
        var index = name_list.indexOf('{{name}}');
        name_list.splice(index, 1);
        var owned_cards = card_list.splice(index, 1);
        var owned_amount = amount_list.splice(index, 1);
        var price = $("#price_" + score).text();
        var i;
        for (i = 0; i < card_list.length; i++) {
          var prop = card_list[i].split(';');
          if (prop.indexOf(score.toString()) != -1) {
            var card_info = "rent#" + score + "#" + '{{name}}' + ">" + name_list[i];
            $("#card_info").val(card_info);
            return 1;
          }
        }
        if (parseInt(owned_amount[0]) < parseInt(price.substring(1))) {
          var card_info = "pass#" + score;
          $("#card_info").val(card_info);
          return 1;
        }
        var owned = owned_cards[0].split(';');
        if (owned[0] != "-1") {
          if (owned.indexOf(score.toString()) != -1) {
            return 2;
          }
        }
      }
      return 0;
    }

    function play(pos, score, col, colors, rolled) {
      removePosition(pos, col);
      var dcol = getColor(col);
      var delay = move(pos, score, dcol, rolled);
      var dispColor = getColorList(colors);
      var user_pay;

      if (score == 0) {
        $("#passbtn-start .cardbtn").click();
        $("#body").animate({
          opacity: 1
        }, delay[0] + 500, function() {
          $("#showsell").click();
          position(score, colors, dispColor);
          $("#cover").hide();
        });
      } else if ((score - pos) < 0) {
        var u = $('#gameuser').val();
        if (u == '{{name}}') {
          console.log("PASSED");
          $('#start_pass').val("start#" + "{{name}}");
          $("#body").animate({
            opacity: 1
          }, delay[1], function() {
            $("#passing_start").click();
          });
          var new_delay = delay[0] - delay[1] - 500;
          $("#body").animate({
            opacity: 1
          }, new_delay + 500, function() {
            var u = $('#gameuser').val();
            if (u == '{{name}}') {
              console.log("THIS");
              user_pay = pay(score);
              if (user_pay == 0) {
                if (score != 0) {
                  cardbuttonShow(score, 'buy,pass');
                  $("#card" + score).click();
                }
              } else if (user_pay == 1) {
                $('#card').click();
                $('#reset-dice').click();
              } else if (user_pay == 2) {
                cardbuttonShow(score, 'sell,pass');
                if (score != 0) {
                  $("#card" + score).click();
                }
              }
            }
            $("#showsell").click();
            position(score, colors, dispColor);
            $("#cover").hide();
          });
        }
      } else {
        $("#body").animate({
          opacity: 1
        }, delay[0] + 500, function() {
          var u = $('#gameuser').val();
          if (u == '{{name}}') {
            console.log("THIS");
            user_pay = pay(score);
            if (user_pay == 0) {
              if (score != 0) {
                cardbuttonShow(score, 'buy,pass');
                $("#card" + score).click();
              }
            } else if (user_pay == 1) {
              $('#card').click();
              $('#reset-dice').click();
            } else if (user_pay == 2) {
              cardbuttonShow(score, 'sell,pass');
              if (score != 0) {
                $("#card" + score).click();
              }
            }
          }
          $("#showsell").click();
          position(score, colors, dispColor);
          $("#cover").hide();
        });
      }
    }

    function update_msg(msg_list) {
      $("#msg_display").fadeOut('fast');
      if(msg_list != ""){
        var section = msg_list.split('**');
        var disp_string = ""
        for (x of section) {
          var elements = x.split("##");
          if (elements.length == 2) {
            var col = getColor(elements[1]);
            if (col == 0) {
              col = elements[1];
            }
            disp_string = disp_string + "<span style=color:" + col + ">" + elements[0] + "</span>" + " ";
          } else {
            disp_string = disp_string + elements[0] + " ";
          }
        }
        string = disp_string.slice(0, -1)
        $("#msg_display").html(string);
        $("#msg_display").fadeIn('fast');
      }
    }

    function update_amount(color_list, amount_list, worth_list) {
      var colors = color_list.split(',');
      var amounts = amount_list.split(',');
      var worths = worth_list.split(',');
      var i;
      for (i = 0; i < colors.length; i++) {
        var uid = "#username-" + colors[i];
        $(uid + " .amount").html("₹" + amounts[i]);
        $(uid + " .worth").html("₹" + worths[i]);
      }
    }

    function update_rent(color_list, card_list, rent_list, build_list) {
      $(".rentcard").each(function() {
        $(this).hide();
      });
      var colors = color_list.split(',');
      var cards = card_list.split(',');
      var rents = rent_list.split(',');
      var builds = build_list.split(',');
      var i;
      var j;
      for (i = 0; i < colors.length; i++) {
        var col = getColor(colors[i]);
        var property = cards[i].split(';');
        var prop_rents = rents[i].split(';');
        var prop_builds = builds[i].split(';');
        for (j = 0; j < property.length; j++) {
          if (prop_rents[j] != "-1") {
            $('#rent' + property[j]).css('--color', col);
            $('#rent' + property[j]).html("₹" + prop_rents[j]);
            $('#rent' + property[j]).show();
            $('#rent_price-' + property[j]).html("₹" + prop_rents[j]);
            var sell_pr = roundToFive(parseInt(prop_rents[j]), 0.7);
            $('#sell_price-' + property[j]).html("₹" + sell_pr.toString());
            update_build_rent(property[j],prop_rents[j],prop_builds[j]);
          }
        }
      }
    }

    function startplay(start_color_list, player_list, amount_list, worth_list) {
      var start_colors = start_color_list.split(",");
      var start_list = getColorList(start_colors);
      var players = player_list.split(",");
      var amounts = amount_list.split(",");
      var worths = worth_list.split(",");
      position(0, start_colors, start_list);
      var i;
      for (i = 0; i < start_colors.length; i++) {
        var pid = "#profile-" + start_colors[i];
        var uid = "#username-" + start_colors[i];
        $(uid + " .name").html(players[i]);
        $(uid + " .amount").html("₹" + amounts[i]);
        $(uid + " .worth").html("₹" + worths[i]);
        $(pid).fadeIn('slow');
        $(pid).prop('class', 'profile mx-2 d-flex justify-content-center align-items-center');
        $(uid).fadeIn('slow');
      }
    }

    function update(status) {
      update_amount(status[1], status[2], status[3]);
      update_rent(status[1], status[4], status[5],status[7]);
      update_msg(status[6]);
    }

    $(document).ready(function() {
      console.log("HELLO");
      $('#start').click(function() {
        var st_col = $("#player_colors").val();
        var st_name = $("#player_names").val();
        var st_amt = $("#player_amount").val();
        var st_worth = $("#player_worth").val();
        startplay(st_col, st_name, st_amt, st_worth);
      });
      $('#move-coin').click(function() {
        $("#dice-row").show();
        $(".roll-d").each(function() {
          $(this).hide();
        });
        var pos = parseInt($('#pos').val());
        var score = parseInt($('#score').val());
        var color = $('#col').val();
        var colors = $('#colors').val().split(",");
        var rolled = parseInt($('#rolled').val());
        if (score == 14) {
          jail_function();
        }
        $(".d-" + rolled.toString()).each(function() {
          $(this).show();
        });
        var darr = ['#left', '#right'];
        var rollid = darr[Math.floor(Math.random() * darr.length)]
        $(rollid).click();
        play(pos, score, color, colors, rolled);
      });
      $(".gamebtn").each(function() {
        $(this).click(function() {
          var id = $(this).attr("id").split("-");
          var card_info = id[1] + "#" + id[2];
          console.log(card_info);
          cardbuttonShow(id[2], 'close');
          $('#reset-sell').click();
          $("#card_info").val(card_info);
          $('#card').click();
          $('#reset-dice').click();
        })
      });
      $(".jailgamebtn").each(function() {
        $(this).click(function() {
          var id = $(this).attr("id").split("-");
          var value = $("#jail-" + id[1]).val();
          var card_info = "jail#" + id[1] + "#" + value;
          console.log(card_info);
          cardbuttonShow(id[2], 'close');
          $('#reset-sell').click();
          $("#card_info").val(card_info);
          $('#card').click();
          $('#reset-dice').click();
          $('#missbtn').hide();
          $('#bailbtn').hide();
        })
      });
      $(".in_card").each(function() {
        $(this).click(function() {
          var id = $(this).attr("id").split("_")[1];
          $("#card" + id).click();
        });
      });
      $('#jail-pass').click(function(){
        $("#body").animate({
          opacity: 1
        }, 2000, function() {
          var card_info = "jail_pass#" + '{{name}}';
          console.log(card_info);
          $('#reset-sell').click();
          $("#card_info").val(card_info);
          $('#card').click();
          $('#reset-dice').click();
        });
      });
      $('#left').click(function() {
        $('#dice-left').show();
        $("#dice-left").animate({
          left: '90%',
        }, 200);
        $('#dice-left').css("transform", "rotate(360deg)");
      });
      $('#right').click(function() {
        $('#dice-right').show();
        $("#dice-right").animate({
          left: '-90%',
        }, 200);
        $('#dice-right').css("transform", "rotate(-360deg)");
      });
      $('#reset-dice').click(function() {
        $('#dice-row').hide();
        $("#dice-right").animate({
          left: '90%',
        }, 100);
        $('#dice-right').css("transform", "rotate(360deg)");
        $("#dice-left").animate({
          left: '-90%',
        }, 100);
        $('#dice-left').css("transform", "rotate(-360deg)");
      });
      $('#show-sell').click(function() {
        var status = $('#status-string').val().split("--");
        if (status != "") {
          var index = status[0].split(',').indexOf('{{name}}');
          var sell_arr = [status[1].split(',')[index], status[4].split(',')[index], status[5].split(',')[index], status[7].split(',')[index]];
          showsell(sell_arr, 1);
        }
      });
      $('#reset-sell').click(function() {
        var status = $('#status-string').val().split("--");
        if (status != "") {
          var index = status[0].split(',').indexOf('{{name}}');
          var sell_arr = [status[1].split(',')[index], status[4].split(',')[index], status[5].split(',')[index], status[7].split(',')[index]];
          showsell(sell_arr, 0);
        }
      });
      $('#update-board').click(function() {
        var status = $('#status-string').val().split("--");
        update(status);
      });
    });
    $(document).on("click", ".empty", function() {
      var parent = $(this).parent().attr('id');
      $("#card" + parent).click();
    });
    $(document).on("click", ".rent-div", function() {
      var parent = $(this).parent().attr('id');
      $("#card" + parent).click();
    });
  </script>

</head>

<body id="body">
  <div class="container-fluid px-0 py-0 mx-0 my-0 pb-0 coversheet" id="cover" style="display:none">
  </div>
  <div class="container-fluid d-flex justify-content-center align-items-center bg-dark px-0 py-0 mx-0 my-0 pb-0" style="min-height:100vh">
    <div class="bg-dark d-flex align-items-center justify-content-center" style="width:90vw">
      <div class="center-image d-flex justify-content-center align-items-center">
        <img class="c-img" src="{% static 'img/center.png' %}" alt="">
      </div>
      <div class="msg-div d-flex justify-content-center align-items-start">
        <div class="row mt-3 d-flex justify-content-center align-items-center" style="width:100%;height:5vh;overflow:hidden">
          <div class="col-11 msg-disp py-1" style="display:none" id="msg_display">

          </div>
        </div>
      </div>
      <div class="dice-div d-flex justify-content-center align-items-end">
        <div class="row mb-3" style="width:100%;height:15vh;overflow:hidden" id="dice-row">
          <div class="col-6 full d-flex justify-content-start align-items-center px-0">
            <div id="dice-left" class="dice dleft d-flex justify-content-center align-items-center">
              <div class="container px-2 roll-d d-1" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-center align-items-center">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-2" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-end align-items-center mb-2">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-start align-items-center mt-2">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-3" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-end align-items-center">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-center align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-start align-items-center">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-4" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center mb-2">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center mt-2">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-5" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-center align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-6" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-6 d-flex justify-content-end align-items-center full px-0">
            <div id="dice-right" class="dice dright d-flex justify-content-center align-items-center">
              <div class="container px-2 roll-d d-1" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-center align-items-center">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-2" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-end align-items-center mb-2">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-start align-items-center mt-2">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-3" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-end align-items-center">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-center align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-start align-items-center">
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-4" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center mb-2">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center mt-2">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-5" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-center align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
              <div class="container px-2 roll-d d-6" style="display:none">
                <div class="row">
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center mt-1 mb-1">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                  <div class="col-12 d-flex justify-content-between align-items-center">
                    <div class="dot"></div>
                    <div class="dot"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid px-0 py-0 mx-0 my-0">
        <div class="row d-flex mb-2 justify-content-around align-items-center b4">
          <div class="col-6 text-center">
          </div>
        </div>
        <div class="row mb-3 b8">
          <div class="col-6 px-0 d-flex align-items-center justify-content-start">
            <div id="profile-red" class="profile mx-2" style="--col:#E65B5B;display:none">
              <i class="fa fa-user usericon" aria-hidden="true" style="--col:#E65B5B"></i>
            </div>
            <div style="display:none" id="username-red">
              <h1 class="font-weight-bold text-uppercase name mb-1" style="--text:#E65B5B">NAME</h1>
              <h1 class="font-weight-bold text-uppercase amt amount mb-1" style="--text:white">AMOUNT</h1>
              <h1 class="font-weight-bold text-uppercase amt worth" style="--text:#E65B5B">(Worth)</h1>
            </div>
          </div>
          <div class="col-6 px-0 d-flex align-items-center justify-content-end">
            <div class="text-right" style="display:none" id="username-blue">
              <h1 class="font-weight-bold text-uppercase name mb-1" style="--text:#3C9FDD">NAME</h1>
              <h1 class="font-weight-bold text-uppercase amt amount mb-1" style="--text:white">AMOUNT</h1>
              <h1 class="font-weight-bold text-uppercase amt worth" style="--text:#3C9FDD">(Worth)</h1>
            </div>
            <div id="profile-blue" class="profile mx-2" style="--col:#3C9FDD;display:none">
              <i class="fa fa-user usericon" aria-hidden="true" style="--col:#3C9FDD"></i>
            </div>
          </div>
        </div>
        <div class="row">
          {% for i in info %}
          <div class="col-6">
            <div class="row">
              {% for j in i %}

              {% if j.num != -1 %}

              {% if j.tag == 0 %}
              <div class="col-3 gamecard d-flex justify-content-center align-items-center px-0 py-0 mx-0 my-0" id="{{j.num}}" style="--bgcolor:{{j.bgcolor}}">
                <div class="d-flex overlap2 justify-content-center align-items-start rent-div" style="height:7vh;width:100%;">
                  <div class="rentcard text-center py-1 px-1" id="rent{{j.num}}" style="display:none;--color:#F0D35B">

                  </div>
                </div>
                <div class="in_card" id="innercard_{{j.num}}">
                  <div class="buy d-flex justify-content-center align-items-center">
                    <span class="text-white place text-uppercase text-center font-weight-bold" id="price_{{j.num}}">₹{{j.price}}</span>
                  </div>
                  <div class="d-flex justify-content-center align-items-center" style="height:6vh">
                    <span class="text-white place text-uppercase text-center font-weight-bold">{{ j.place }}</span>
                  </div>
                </div>
                <button type="button" id="card{{j.num}}" class="btn btn-primary" data-toggle="modal" data-target="#CardModal{{j.num}}" style="display:none"></button>
              </div>
              <div class="modal fade my-0 py-0" id="CardModal{{j.num}}" style="--bcolor:{{j.bgcolor}}" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false" data-backdrop="static">
                <div class="modal-dialog modal-dialog-centered d-flex justify-content-center align-items-center my-0 py-0" role="document">
                  <div class="modal-content modal-border modalcard my-0 py-0" style="--bcolor:{{j.bgcolor}}">
                    <div class="d-flex justify-content-center align-items-center pt-1 pb-2" style="background:{{j.bgcolor}}">
                      <h5 class="font-weight-bold text-white text-uppercase py-0 my-0">{{ j.place }}</h5>
                    </div>
                    <div class="modal-body pt-2 my-0 pb-0 d-flex justify-content-center align-items-center">
                      <div class="container-fluid mt-0">
                        <div class="row mt-0">
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Cost</b>
                            <hr class="py-0 my-0">
                            <b>₹{{j.price}}</b>
                          </div>
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Sell</b>
                            <hr class="py-0 my-0">
                            <b id="sell_price-{{j.num}}">₹{{j.sell}}</b>
                          </div>
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Rent</b>
                            <hr class="py-0 my-0">
                            <b id="rent_price-{{j.num}}">₹{{j.rent}}</b>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12 text-center text-uppercase font-weight-bold">
                            Build
                            <hr class="py-0 my-0">
                          </div>
                        </div>
                        <div class="row mt-1" id="build{{j.num}}">
                          <div class="col-4 px-0 mx-0 card-label text-center text-uppercase font-weight-bold">
                            <img src="{% static 'img/lodge.png' %}" style="width:70%" alt="">
                            <span>Lodge</span><br>
                            <span>₹{{j.build1}}</span><br>
                            <input type="text" value="{{j.build1}}" class="price_bldX" style="display:none">
                            <span id="bldX-{{j.num}}">[+80%]</span><span class="rent vertical-align-middle">rent</span>
                            <button class="build bldX gamebtn" id="cardbtn-build#X-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Build</button>
                            <button class="build-sell bsellX gamebtn" id="cardbtn-build_sell#X-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Sell</button>
                          </div>
                          <div class="col-4 px-0 mx-0 card-label text-center text-uppercase font-weight-bold">
                            <img src="{% static 'img/hotel.png' %}" style="width:70%" alt="">
                            <span>Hotel</span><br>
                            <span>₹{{j.build2}}</span><br>
                            <input type="text" value="{{j.build2}}" class="price_bldY" style="display:none">
                            <span id="bldY-{{j.num}}">[+90%]</span><span class="rent vertical-align-middle">rent</span>
                            <button class="build bldY gamebtn" id="cardbtn-build#Y-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Build</button>
                            <button class="build-sell bsellY gamebtn" id="cardbtn-build_sell#Y-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Sell</button>
                          </div>
                          <div class="col-4 px-0 mx-0 card-label text-center text-uppercase font-weight-bold">
                            <img src="{% static 'img/resort.png' %}" style="width:70%" alt="">
                            <span>Resort</span><br>
                            <span>₹{{j.build3}}</span><br>
                            <input type="text" value="{{j.build3}}" class="price_bldZ" style="display:none">
                            <span id="bldZ-{{j.num}}">[+100%]</span><span class="rent vertical-align-middle">rent</span>
                            <button class="build bldZ gamebtn" id="cardbtn-build#Z-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Build</button>
                            <button class="build-sell bsellZ gamebtn" id="cardbtn-build_sell#Z-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Sell</button>
                          </div>
                        </div>
                        <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                          <div class="col-5" id="closebtn{{j.num}}">
                            <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                              Close
                            </button>
                          </div>
                          <div class="col-5" id="passbtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-pass-{{j.num}}" class="cardbtn gamebtn" style="--btncol:grey" data-dismiss="modal">
                              Pass
                            </button>
                          </div>
                          <div class="col-5" id="sellbtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-sell-{{j.num}}" class="cardbtn2 gamebtn" style="--btncol:{{j.bgcolor}}" data-dismiss="modal">
                              Sell
                            </button>
                          </div>
                          <div class="col-5" id="buybtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-buy-{{j.num}}" class="cardbtn gamebtn" style="--btncol:{{j.bgcolor}}" data-dismiss="modal">
                              Buy
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% elif j.tag == 1 %}
              <div class="col-3 gamecard d-flex justify-content-center align-items-center px-0 py-0 mx-0 my-0" id="{{j.num}}" style="--bgcolor:{{j.bgcolor}}">
                <div class="d-flex overlap2 justify-content-center align-items-start rent-div" style="height:7vh;width:100%;">
                  <div class="rentcard text-center py-1 px-1" id="rent{{j.num}}" style="display:none;--color:#F0D35B">

                  </div>
                </div>
                <div class="in_card" id="innercard_{{j.num}}">
                  <div class="buy d-flex justify-content-center align-items-center">
                    <span class="place text-uppercase text-center font-weight-bold" id="price_{{j.num}}">₹{{j.price}}</span>
                  </div>
                  <div class="d-flex justify-content-center align-items-center" style="height:6vh">
                    <span class="place text-uppercase text-center font-weight-bold">{{ j.place }}</span>
                  </div>
                </div>
                <button type="button" id="card{{j.num}}" class="btn btn-primary" data-toggle="modal" data-target="#CardModal{{j.num}}" style="display:none"></button>
              </div>
              <div class="modal fade my-0 py-0" id="CardModal{{j.num}}" style="--bcolor:{{j.bgcolor}}" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false" data-backdrop="static">
                <div class="modal-dialog modal-dialog-centered d-flex justify-content-center align-items-center my-0 py-0" role="document">
                  <div class="modal-content modal-border modalcard my-0 py-0" style="--bcolor:{{j.bgcolor}}">
                    <div class="d-flex justify-content-center align-items-center pt-1 pb-2" style="background:{{j.bgcolor}}">
                      <h5 class="font-weight-bold text-dark text-uppercase py-0 my-0">{{ j.place }}</h5>
                    </div>
                    <div class="modal-body pt-2 my-0 pb-0 d-flex justify-content-center align-items-center">
                      <div class="container-fluid mt-0">
                        <div class="row mt-0">
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Cost</b>
                            <hr class="py-0 my-0">
                            <b>₹{{j.price}}</b>
                          </div>
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Sell</b>
                            <hr class="py-0 my-0">
                            <b id="sell_price-{{j.num}}">₹{{j.sell}}</b>
                          </div>
                          <div class="col-4 text-center text-uppercase card-label">
                            <b>Rent</b>
                            <hr class="py-0 my-0">
                            <b id="rent_price-{{j.num}}">₹{{j.rent}}</b>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12 text-center text-uppercase font-weight-bold">
                            Start
                            <hr class="py-0 my-0">
                          </div>
                        </div>
                        <div class="row mt-1" id="build{{j.num}}">
                          <div class="col-6 px-0 mx-0 card-label text-center text-uppercase font-weight-bold">
                            <img src="{% static 'img/cargo.png' %}" style="width:70%" alt="">
                            <span>Cargo</span><br>
                            <span>₹{{j.build1}}</span><br>
                            <input type="text" value="{{j.build1}}" class="price_bldX" style="display:none">
                            <span id="transX-{{j.num}}">[+80%]</span><span class="rent vertical-align-middle">/round</span>
                            <button class="build text-dark bldX gamebtn" id="cardbtn-transport#X-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Start</button>
                            <button class="build-sell text-dark bsellX gamebtn" id="cardbtn-transport_sell#X-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Sell</button>
                          </div>
                          <div class="col-6 px-0 mx-0 card-label text-center text-uppercase font-weight-bold">
                            <img src="{% static 'img/tour.png' %}" style="width:70%" alt="">
                            <span>Tour</span><br>
                            <span>₹{{j.build2}}</span><br>
                            <input type="text" value="{{j.build2}}" class="price_bldY" style="display:none">
                            <span id="transY-{{j.num}}">[+80%]</span><span class="rent vertical-align-middle">/round</span>
                            <button class="build text-dark bldY gamebtn" id="cardbtn-transport#Y-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Start</button>
                            <button class="build-sell text-dark bsellY gamebtn" id="cardbtn-transport_sell#Y-{{j.num}}" style="--btncol:{{j.bgcolor}};display:none" data-dismiss="modal">Sell</button>
                          </div>
                        </div>
                        <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                          <div class="col-5" id="closebtn{{j.num}}">
                            <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                              Close
                            </button>
                          </div>
                          <div class="col-5" id="passbtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-pass-{{j.num}}" class="cardbtn gamebtn" style="--btncol:grey" data-dismiss="modal">
                              Pass
                            </button>
                          </div>
                          <div class="col-5" id="sellbtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-tsell-{{j.num}}" class="cardbtn2 gamebtn text-dark" style="--btncol:{{j.bgcolor}}" data-dismiss="modal">
                              Sell
                            </button>
                          </div>
                          <div class="col-5" id="buybtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-tbuy-{{j.num}}" class="cardbtn gamebtn text-dark" style="--btncol:{{j.bgcolor}}" data-dismiss="modal">
                              Buy
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% elif j.tag == 2 %}
              <div class="col-3 gamecard2 d-flex justify-content-center align-items-center px-0 py-0 mx-0 my-0" id="{{j.num}}" style="--bgcolor:{{j.bgcolor}}">
                <div class="in_card" id="innercard_{{j.num}}">
                  <div class="d-flex justify-content-center align-items-end" style="height:5vh">
                    {% if j.place == 'Start' %}
                    <img src="{% static 'img/Start.png' %}" style="width:60%" alt="">
                    {% endif %}
                    {% if j.place == 'Random' %}
                    <img src="{% static 'img/Random.png' %}" style="width:60%" alt="">
                    {% endif %}
                    {% if j.place == 'Jail' %}
                    <img src="{% static 'img/Jail.png' %}" style="width:60%" alt="">
                    {% endif %}
                    {% if j.place == 'Auction' %}
                    <img src="{% static 'img/Auction.png' %}" style="width:60%" alt="">
                    {% endif %}
                  </div>
                  <div class="d-flex justify-content-center align-items-center" style="height:3vh">
                    <span class="place text-uppercase text-center font-weight-bold">{{ j.place }}</span>
                  </div>
                </div>
                <button type="button" id="card{{j.num}}" class="btn btn-primary" data-toggle="modal" data-target="#CardModal{{j.num}}" style="display:none"></button>
              </div>
              <div class="modal fade my-0 py-0" id="CardModal{{j.num}}" style="--bcolor:{{j.bgcolor}}" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false" data-backdrop="static">
                <div class="modal-dialog modal-dialog-centered d-flex justify-content-center align-items-center my-0 py-0" role="document">
                  <div class="modal-content modal-border modalcard my-0 py-0" style="--bcolor:{{j.bgcolor}}">
                    <div class="d-flex justify-content-center align-items-center pt-1 pb-2" style="background:{{j.bgcolor}}">
                      <h5 class="font-weight-bold text-dark text-uppercase py-0 my-0">{{ j.place }}</h5>
                    </div>
                    <div class="modal-body pt-2 my-0 pb-0 d-flex justify-content-center align-items-center">
                      {% if j.place == 'Start' %}
                      <div class="container-fluid mt-0">
                        <div class="row">
                          <div class="col-12 text-center">
                            <img src="{% static 'img/Start.png' %}" style="width:70%" alt="">
                          </div>
                          <div class="col-12 text-center text-uppercase font-weight-bold card-label">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. in voluptate v
                          </div>
                        </div>
                        <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                          <div class="col-5" id="closebtn{{j.num}}">
                            <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                              Close
                            </button>
                          </div>
                          <div class="col-5" id="passbtn-start" style="display:none">
                            <button type="button" id="cardbtn-pass-{{j.num}}" class="cardbtn gamebtn">
                              Pass
                            </button>
                          </div>
                        </div>
                      </div>
                      {% endif %}

                      {% if j.place == 'Random' %}
                      <div class="container-fluid mt-0">
                        <div class="row">
                          <div class="col-12 text-center">
                            <img src="{% static 'img/Random.png' %}" style="width:70%" alt="">
                          </div>
                          <div class="col-12 text-center text-uppercase font-weight-bold card-label">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. in voluptate v
                          </div>
                        </div>
                        <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                          <div class="col-5" id="closebtn{{j.num}}">
                            <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                              Close
                            </button>
                          </div>
                          <div class="col-5" id="passbtn{{j.num}}" style="display:none">
                            <button type="button" id="cardbtn-pass-{{j.num}}" class="cardbtn gamebtn" style="--btncol:grey" data-dismiss="modal">
                              Pass
                            </button>
                          </div>
                        </div>
                      </div>
                      {% endif %}

                      {% if j.place == 'Jail' %}
                      <div class="container-fluid mt-0">
                        <div class="row">
                          <div class="col-12 text-center">
                            <img src="{% static 'img/Jail.png' %}" style="width:70%" alt="">
                          </div>
                          <div class="col-12 text-center text-uppercase font-weight-bold card-label">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. in voluptate v
                          </div>
                        </div>
                        <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                          <div class="col-5" id="closebtn{{j.num}}">
                            <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                              Close
                            </button>
                          </div>
                          <div class="col-6" id="missbtn" style="display:none">
                            <center><span class="jail-opt" id="miss_text">3 Chances</span></center>
                            <button type="button" id="cardbtn-miss-{{j.num}}" class="cardbtn jailgamebtn" style="--btncol:grey" data-dismiss="modal">
                              Miss
                            </button>
                            <input type="text" id="jail-miss" style="display:none;">
                          </div>
                          <div class="col-6" id="bailbtn" style="display:none">
                            <center><span class="jail-opt" id="bail_text">$400</span></center>
                            <button type="button" id="cardbtn-bail-{{j.num}}" class="cardbtn jailgamebtn" style="--btncol:grey" data-dismiss="modal">
                              Bail
                            </button>
                            <input type="text" id="jail-bail" style="display:none;">
                          </div>
                        </div>
                      </div>
                      {% endif %}

                    </div>
                  </div>
                </div>
              </div>
              {% endif %}



              {% else %}
              <div class="col-3 gamecard-blank d-flex justify-content-center align-items-center"></div>
              {% endif %}

              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="row mt-3 b8">
          <div class="col-4 px-0 d-flex align-items-center justify-content-start">
            <div id="profile-green" class="profile mx-2" style="--col:#54EC64;display:none">
              <i class="fa fa-user usericon" aria-hidden="true" style="--col:#54EC64"></i>
            </div>
            <div style="display:none" id="username-green">
              <h1 class="font-weight-bold text-uppercase name mb-1" style="--text:#54EC64">NAME</h1>
              <h1 class="font-weight-bold text-uppercase amt amount mb-1" style="--text:white">AMOUNT</h1>
              <h1 class="font-weight-bold text-uppercase amt worth" style="--text:#54EC64">(Worth)</h1>
            </div>
          </div>
          <div class="col-4 px-0 py-0 d-flex align-items-center justify-content-center">
            <button type="button" id="roll" class="rollbtn" style="--bgcolor:#54EC64;display:none"> ROLL </button>
          </div>
          <div class="col-4 px-0 d-flex align-items-center justify-content-end">
            <div class="text-right" style="display:none" id="username-yellow">
              <h1 class="font-weight-bold text-uppercase name mb-1" style="--text:#EBED61">NAME</h1>
              <h1 class="font-weight-bold text-uppercase amt amountmb-1" style="--text:white">AMOUNT</h1>
              <h1 class="font-weight-bold text-uppercase amt worth" style="--text:#EBED61">(Worth)</h1>
            </div>
            <div id="profile-yellow" class="profile mx-2" style="--col:#EBED61;display:none">
              <i class="fa fa-user usericon" aria-hidden="true" style="--col:#EBED61"></i>
            </div>
          </div>
        </div>
        <div class="row d-flex mt-2 justify-content-around align-items-center b4">
          <div class="col-6 text-center">
            <button type="button" class="optbtn" data-toggle="modal" data-target="#optionModal" id="opt" style="--bgcolor:#54EC64;display:none" name="button">Options</button>
          </div>
        </div>
        <div class="modal fade my-0 py-0" id="optionModal" style="--bcolor:#FFFFFF" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false" data-backdrop="static">
          <div class="modal-dialog modal-dialog-centered d-flex justify-content-center align-items-center my-0 py-0" role="document">
            <div class="modal-content modal-border modalcard my-0 py-0" id="optModal-content" style="--bcolor:#FFFFFF">
              <div class="d-flex justify-content-center align-items-center pt-1 pb-2" id="optModal-head" style="background:#FFFFFF">
                <h5 class="font-weight-bold text-dark text-uppercase py-0 my-0">Options</h5>
              </div>
              <div class="modal-body d-flex justify-content-center align-items-center pt-2 my-0 pb-0">
                <div class="container-fluid mt-0">
                  <div class="row">
                    <div class="col-4 text-center text-uppercase card-label">
                      <b>Action1</b>
                      <hr class="py-0 my-0">
                      <button type="button" class="cardbtn-opt" style="--btncol:#FFFFFF" data-dismiss="modal">
                        Action1
                      </button>
                    </div>
                    <div class="col-4 text-center text-uppercase card-label">
                      <b>Action2</b>
                      <hr class="py-0 my-0">
                      <button type="button" class="cardbtn-opt" style="--btncol:#FFFFFF" data-dismiss="modal">
                        Action2
                      </button>
                    </div>
                    <div class="col-4 text-center text-uppercase card-label">
                      <b>Action3</b>
                      <hr class="py-0 my-0">
                      <button type="button" class="cardbtn-opt" style="--btncol:#FFFFFF" data-dismiss="modal">
                        Action3
                      </button>
                    </div>
                    <!-- <div class="col-12 text-center">
                      <img src="{% static 'img/Auction.png' %}" style="width:70%" alt="">
                    </div> -->
                    <!-- <div class="col-12 text-center text-uppercase font-weight-bold card-label">
                      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                    </div> -->
                  </div>
                  <div class="row d-flex justify-content-around align items center mb-2 mt-3">
                    <div class="col-5" id="closebtn{{j.num}}">
                      <button type="button" class="cardbtn" style="--btncol:grey" data-dismiss="modal">
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row my-2">
      <div class="col-12 bg-dark mb-3"><input type="number" class="border border-primary" id="custom_roll" style="width:100%"></div>
    </div>
    <div class="row">
      <input type="text" id="pos">
      <input type="text" id="score">
      <input type="text" id="col">
      <input type="text" id="colors">
      <input type="text" id="gameuser">
      <br>
      <button type="button" id="move-coin">move</button>
      <button type="button" id="start">start</button>
      <input type="text" id="rolled">
      <input type="text" id="player_colors">
      <input type="text" id="player_names">
      <input type="text" id="player_amount">
      <input type="text" id="player_worth">
      <input type="text" id="card_info">
      <button type="button" id="card">card</button>
      <button class="text-uppercase" id="left">left</button>
      <button class="text-uppercase" id="right">right</button>
      <button class="text-uppercase" id="reset-dice">reset</button>
      <button type="button" id="jail-pass">jail-pass</button>

      <button class="text-uppercase" id="show-sell">show-sell</button>
      <button class="text-uppercase" id="reset-sell">reset-sell</button>
      <input type="text" id="status-string">
      <button class="text-uppercase" id="update-board">Update</button>

      <input type="text" id="start_pass">
      <button type="button" id="passing_start">PassStart</button>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-12">
        <textarea id="chat-log" style="width:100%;height:20vh"></textarea><br>
        <input id="chat-message-input" type="text" style="width:100%"><br><br>
        <center><input id="chat-message-submit" type="button" value="Send"><br>
          <!-- <input id="roll" type="button" value="ROLL"></center><br> -->
          <input type="text" id="count-log" style="width:100%"></span>
          <input type="number" id="custom_roll" style="width:100%"></span>
      </div>
    </div>
  </div>



  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <div class="container mt-0 mb-5">
    <center>
      {{ room_name|json_script:"room-name" }}
      {{name}}
    </center>
  </div>

  <script>
    function getBtnColor(c) {
      if (c == 'red') {
        return '#E65B5B';
      }
      if (c == 'blue') {
        return '#3C9FDD';
      }
      if (c == 'green') {
        return '#54EC64';
      }
      if (c == 'yellow') {
        return '#EBED61';
      }
    }

    const roomName = JSON.parse(document.getElementById('room-name').textContent);
    // console.log(roomName);

    const chatSocket = new WebSocket(
      'ws://' +
      window.location.host +
      '/ws/chat/' +
      roomName +
      '/'
    );

    chatSocket.onmessage = function(e) {
      const data = JSON.parse(e.data);
      if (data.tag == 1) {

        if ('{{name}}' == data.name) {
          document.querySelector('#chat-log').value += ("you are added" + '\n');
        } else {
          document.querySelector('#chat-log').value += (data.name + " is added" + '\n');
        }
        document.querySelector('#player_names').value = data.player;
        document.querySelector('#player_colors').value = data.color;
        document.querySelector('#player_amount').value = data.amount;
        document.querySelector('#player_worth').value = data.worth;

        document.querySelector('#start').click();
      } else if (data.tag == 3) {
        // console.log(data);
        document.querySelector('#reset-dice').click();
        document.getElementById("roll").style.setProperty('--bgcolor', getBtnColor(data.color));
        document.getElementById("opt").style.setProperty('--bgcolor', getBtnColor(data.color));
        var dice = document.getElementsByClassName("dice");
        for (var i = 0; i < dice.length; i++) {
          dice[i].style.setProperty('--dcol', getBtnColor(data.color));
        }
        var dots = document.getElementsByClassName("dot");
        for (var i = 0; i < dots.length; i++) {
          dots[i].style.setProperty('--dcol', getBtnColor(data.color));
        }
        var jail_check = 0;
        for (x of data.jail) {
            if (x == '{{name}}'){
              jail_check = 1;
            }
          }
        if (data.roll == '{{name}}') {
          if (jail_check == 0){
            document.getElementById("roll").style.display = "block";
            document.getElementById("opt").style.display = "block";
            document.getElementById('show-sell').click();
            document.getElementById("optionModal").style.setProperty('--bcolor', getBtnColor(data.color));
            document.getElementById("optModal-content").style.setProperty('--bcolor', getBtnColor(data.color));
            document.getElementById("optModal-head").style.setProperty('background', getBtnColor(data.color));
            // document.getElementsByClassName("cardbtn-opt").style.setProperty('--btncol', getBtnColor(data.color));
            var x = document.getElementsByClassName("cardbtn-opt")
            var i;
            for (i = 0; i < x.length; i++) {
              x[i].style.setProperty('--btncol', getBtnColor(data.color));
            }
          }
          else{
            document.getElementById("roll").style.display = "none";
            document.getElementById("opt").style.display = "none";
            document.getElementById('reset-sell').click();
            document.getElementById('jail-pass').click();
          }
        } else {
          document.getElementById("roll").style.display = "none";
          document.getElementById("opt").style.display = "none";
          document.getElementById('reset-sell').click();
        }

      } else if (data.tag == 4) {
        // console.log(data);
        document.querySelector('#chat-log').value += (data.roll_value + " " + data.curr_player + " " + data.curr_color + '\n');
        document.querySelector('#chat-log').value += ("Move from: " + data.curr_loc + " to " + data.new_loc + " " + data.colors + '\n');
        document.querySelector('#pos').value = data.curr_loc;
        document.querySelector('#score').value = data.new_loc;
        document.querySelector('#col').value = data.curr_color;
        document.querySelector('#colors').value = data.colors;
        document.querySelector('#rolled').value = data.roll_value;
        document.querySelector('#gameuser').value = data.curr_player;
        document.getElementById("roll").style.display = "none";
        document.getElementById("opt").style.display = "none";
        document.querySelector('#move-coin').click();
        // document.querySelector('#reset').click();
      } else if (data.tag == 0) {
        // console.log(data.message);
        document.querySelector('#chat-log').value += (data.message + '\n');
      } else if (data.tag == 2) {
        // console.log(data.message);
        document.querySelector('#chat-log').value += (data.message + " left" + '\n');
      } else if (data.tag == 5) {
        var status = data.names + "--" + data.color + "--" + data.amount + "--" + data.worth + "--" + data.user_card + "--" + data.user_cost;
        status = status + "--" + data.display + "--" + data.build + "--" + data.curr_color;
        // console.log(data.build);
        document.querySelector('#status-string').value = status;
        document.querySelector('#update-board').click();
        // document.getElementById('show-sell').click();
      } else if (data.tag == 6) {
        var stat = document.getElementById("status-string").value;
        var stat_arr = stat.split("--");
        stat_arr[1] = data.color;
        stat_arr[2] = data.amount;
        stat_arr[3] = data.worth;
        var status = stat_arr.join("--");
        document.querySelector('#status-string').value = status;
        document.querySelector('#update-board').click();
      }
      document.querySelector('#count-log').value = (data.count);

    };

    chatSocket.onclose = function(e) {
      console.error('Chat socket closed unexpectedly');
    };

    document.querySelector('#chat-message-input').focus();
    document.querySelector('#chat-message-input').onkeyup = function(e) {
      if (e.keyCode === 13) { // enter, return
        document.querySelector('#chat-message-submit').click();
      }
    };

    document.querySelector('#chat-message-submit').onclick = function(e) {
      const messageInputDom = document.querySelector('#chat-message-input');
      const message = messageInputDom.value;
      chatSocket.send(JSON.stringify({
        'tag': 0,
        'message': message
      }));
      messageInputDom.value = '';
    };

    document.querySelector('#roll').onclick = function(e) {
      const messageInputDom = document.querySelector('#custom_roll');
      const message = messageInputDom.value;
      chatSocket.send(JSON.stringify({
        'tag': 3,
        'name': '{{name}}',
        'roll': 'roll',
        'value': message
      }));
      messageInputDom.value = '';
    };

    document.querySelector('#card').onclick = function(e) {
      const messageInputDom = document.querySelector('#card_info');
      const message = messageInputDom.value;
      const rollInputDom = document.querySelector('#rolled');
      const roll = rollInputDom.value;
      chatSocket.send(JSON.stringify({
        'tag': 5,
        'card': message,
        'name': '{{name}}',
        'roll': roll
      }));
      messageInputDom.value = '';
    };

    document.querySelector('#passing_start').onclick = function(e) {
      const messageInputDom = document.querySelector('#start_pass');
      const message = messageInputDom.value;
      const rollInputDom = document.querySelector('#rolled');
      const roll = rollInputDom.value;
      chatSocket.send(JSON.stringify({
        'tag': 6,
        'card': message,
        'name': '{{name}}',
        'roll': roll
      }));
      messageInputDom.value = '';
    };
  </script>

</body>

</html>